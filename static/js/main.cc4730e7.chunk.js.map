{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/Button/Button.module.css","App.module.css","services/apiService.js","components/Modal/Modal.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Loader/Loader.jsx","components/Searchbar/Searchbar.jsx","components/Button/Button.jsx","App.js","index.js","components/Modal/Modal.module.css","components/Searchbar/Searchbar.module.css"],"names":["module","exports","fetchHits","a","searchQuery","currentPage","axios","get","response","data","hits","images","modalRootRef","document","querySelector","Modal","onEscPress","e","code","console","log","props","onClose","handleBackdropClick","target","currentTarget","window","addEventListener","this","removeEventListener","children","createPortal","className","styles","backdrop","onClick","modal","header","type","closeBtn","content","Component","ImageGalleryItem","smallImage","largeImage","alt","src","ImageGalleryItemImage","ImageGallery","map","id","webformatURL","largeImageURL","tags","Spinner","loader","color","height","width","timeout","Searchbar","state","handleChange","event","setState","value","handleSubmit","preventDefault","onSubmit","SearchForm","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Button","MODAL","App","openedModal","isLoading","getDataApi","options","then","prevState","catch","error","finally","scrollTo","top","documentElement","scrollHeight","behavior","handleSearch","openModal","img","closeModal","prevProps","shouldRenderLoadMoreButton","length","app","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cc4730e7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__17RCK\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1wjta\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3antE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__2m_6L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3wckd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1bXcb\"};","import axios from \"axios\";\r\n\r\nconst BASE_URL = \"https://pixabay.com/api/\";\r\nconst API_KEY = \"20731872-71a610166f6b50a9cc8e22574\";\r\nconst perPage = 12;\r\n\r\nconst fetchHits = async ({ searchQuery = \"\", currentPage = 1 }) => {\r\n  try {\r\n    let response = await axios.get(\r\n      `${BASE_URL}?q=${searchQuery}&page=${currentPage}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=${perPage}`\r\n    );\r\n    let images = await response.data.hits;\r\n    return images;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport default fetchHits;\r\n","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"./Modal.module.css\";\r\n\r\nconst modalRootRef = document.querySelector(\"#modal-root\");\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.onEscPress);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.onEscPress);\r\n  }\r\n\r\n  onEscPress = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      console.log(\"Escape\");\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = (e) => {\r\n    if (e.target === e.currentTarget) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { onClose, children } = this.props;\r\n\r\n    return createPortal(\r\n      <div className={styles.backdrop} onClick={this.handleBackdropClick}>\r\n        <div className={styles.modal}>\r\n          <header className={styles.header}>\r\n            <button\r\n              type=\"button\"\r\n              className={styles.closeBtn}\r\n              onClick={onClose}\r\n              aria-label=\"Close\"\r\n            >\r\n              &times;\r\n            </button>\r\n          </header>\r\n\r\n          <div className={styles.content}>{children}</div>\r\n        </div>\r\n      </div>,\r\n      modalRootRef\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  // icon: PropTypes.string.isRequired, //from props\r\n  // title: PropTypes.string.isRequired, //from props\r\n  children: PropTypes.node.isRequired,\r\n};\r\n\r\nexport default Modal;\r\n","import PropTypes from \"prop-types\";\r\nimport styles from \"./ImageGalleryItem.module.css\";\r\n\r\nconst ImageGalleryItem = ({ smallImage, largeImage, onClick, alt }) => {\r\n  return (\r\n    <li className={styles.ImageGalleryItem}>\r\n      <img\r\n        onClick={() => onClick(largeImage)}\r\n        src={smallImage}\r\n        alt={alt}\r\n        className={styles.ImageGalleryItemImage}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  smallImage: PropTypes.string.isRequired,\r\n  largeImage: PropTypes.string.isRequired,\r\n  alt: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import PropTypes from \"prop-types\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\nimport styles from \"./ImageGallery.module.css\";\r\n\r\nconst ImageGallery = ({ hits, onClick }) => {\r\n  return (\r\n    <ul className={styles.ImageGallery}>\r\n      {hits.map(({ id, webformatURL, largeImageURL, tags }) => (\r\n        <ImageGalleryItem\r\n          key={id}\r\n          smallImage={webformatURL}\r\n          largeImage={largeImageURL}\r\n          alt={tags}\r\n          onClick={onClick}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  hits: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      webformatURL: PropTypes.string.isRequired,\r\n      largeImageURL: PropTypes.string.isRequired,\r\n    })\r\n  ).isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import { Component } from \"react\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nimport styles from \"./Loader.module.css\";\r\n\r\nclass Spinner extends Component {\r\n  render() {\r\n    return (\r\n      <Loader\r\n        className={styles.loader}\r\n        type=\"ThreeDots\"\r\n        color=\"#3f51b5\"\r\n        height={120}\r\n        width={120}\r\n        timeout={3000}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Spinner;\r\n","// Компонент принимает один проп onSubmit - функцию для передачи значения инпута при сабмите формы.\r\n// Создает DOM-элемент следующей структуры.\r\n\r\nimport { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"./Searchbar.module.css\";\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    searchQuery: \"\",\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    this.setState({ searchQuery: event.currentTarget.value });\r\n  };\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    this.props.onSubmit(this.state.searchQuery);\r\n    // this.setState({ searchQuery: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={styles.SearchFormButton}>\r\n            <span className={styles.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.searchQuery}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Searchbar;\r\n","import styles from \"./Button.module.css\";\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button type=\"button\" className={styles.Button} onClick={onClick}>\r\n      <span>Loade more</span>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import { Component } from \"react\";\nimport fetchHits from \"./services/apiService\";\nimport Modal from \"./components/Modal\";\nimport ImageGallery from \"./components/ImageGallery\";\nimport Spinner from \"./components/Loader\";\nimport Searchbar from \"./components/Searchbar\";\nimport Button from \"./components/Button\";\n\nimport styles from \"./App.module.css\";\n\nconst MODAL = {\n  NONE: \"none\",\n  OPEN: \"open\",\n  // EDIT: \"edit\",\n  // DELETE: \"delete\",\n};\n\nclass App extends Component {\n  state = {\n    openedModal: MODAL.NONE,\n    hits: [],\n    currentPage: 1,\n    searchQuery: \"\",\n    largeImage: \"\",\n    isLoading: false,\n    smallImage: \"\",\n    alt: \"\",\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.getDataApi();\n    }\n  }\n\n  getDataApi = () => {\n    const { currentPage, searchQuery } = this.state;\n    const options = { currentPage, searchQuery };\n\n    this.setState({ isLoading: true });\n\n    fetchHits(options)\n      .then((hits) => {\n        this.setState((prevState) => ({\n          hits: [...prevState.hits, ...hits],\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .catch((error) => this.setState({ error }))\n      .finally(() => {\n        this.setState({ isLoading: false });\n\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: \"smooth\",\n        });\n      });\n  };\n\n  handleSearch = (searchQuery) => {\n    if (this.state.searchQuery === searchQuery) return;\n    this.setState({\n      searchQuery: searchQuery,\n      currentPage: 1,\n      hits: [],\n    });\n  };\n\n  openModal = (img) =>\n    this.setState({\n      openedModal: MODAL.OPEN,\n      largeImage: img,\n    });\n\n  closeModal = () =>\n    this.setState({\n      openedModal: MODAL.NONE,\n    });\n\n  render() {\n    const { openedModal, isLoading, hits } = this.state;\n    const shouldRenderLoadMoreButton = hits.length > 0 && !isLoading;\n\n    return (\n      <div className={styles.app}>\n        <Searchbar onSubmit={this.handleSearch} />\n        {hits.length > 0 && (\n          <ImageGallery hits={hits} onClick={this.openModal} />\n        )}\n        {isLoading && <Spinner />}\n        {shouldRenderLoadMoreButton && <Button onClick={this.getDataApi} />}\n\n        {openedModal === MODAL.OPEN && (\n          <Modal onClose={this.closeModal} largeImage={this.state.largeImage}>\n            <img src={this.state.largeImage} alt=\"\" />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__1pYM-\",\"modal\":\"Modal_modal__h2CnA\",\"header\":\"Modal_header__1u-k1\",\"closeBtn\":\"Modal_closeBtn__drpQo\",\"content\":\"Modal_content__3XVSN\",\"lead\":\"Modal_lead__12rxE\",\"imageWrapper\":\"Modal_imageWrapper__-MPy4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3Tfpq\",\"SearchForm\":\"Searchbar_SearchForm__1CfZf\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3Bkpa\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1eOlt\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3In_f\"};"],"sourceRoot":""}